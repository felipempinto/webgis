
{% extends  "main/header.html"%}

{% block content %}
{% load static %}
{% csrf_token %}
<div class="container">
  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s4"><a href="#raster-tab">Raster</a></li>
        <li class="tab col s4"><a href="#vector-tab">Vector</a></li>
        <li class="tab col s4"><a href="#other-tab">Other</a></li>
      </ul>
    </div>
  </div>
</div>

<div class="container">
  
  {% for dataname,dataset_all in data.items %}
    
    <div id="{{dataname}}-tab" class="col s12">
      {% if dataset_all %}
          <table  class="striped">
            <thead>
              <tr>
                <th>Name</th>
                <th>Download</th>
                <th>Created at</th>
                {% if dataname != "other" %}
                <th>Create View</th>
                <th>Delete View</th>
                {% endif %}
              </tr>
            </thead>
            <tbody>
              {% for dataset in dataset_all %}
                <tr>
                  <td>{{ dataset.name }}</td>
                  <td><a href="{{ dataset.file.url }}" download><i class="material-icons">file_download</i></a></td>
                  <td>{{ dataset.get_created_at }}</td>
                  {% if dataname != "other" %}
                    {% if dataset.created %}
                      <td><a href="/map/"><i class="material-icons">map</i></a></td>
                      <td><a href="{% url 'main:deletedata' %}?{{dataname}}_id={{dataset.id}}"><i class="material-icons">delete</i></a></td>
                    {% else %}
                      <td><a href="{% url 'main:createdata' %}?{{dataname}}_id={{dataset.id}}"><i class="material-icons">edit_location</i></a></td>
                      <td><i class="material-icons">delete</i></td>
                    {% endif %}
                  {% endif %}
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>You have no raster datasets.</p>
        {% endif %}
    </div>

  {% endfor %}
</div>

<script>
    var el = document.querySelector('.tabs');
    var options={}
    var instance = M.Tabs.init(el, options);

</script>
{% endblock %}
